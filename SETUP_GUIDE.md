# ğŸ› ï¸ RAG-Anything è‡ªå®šä¹‰é…ç½®æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é…ç½®å’Œè¿è¡Œæœ¬é¡¹ç›®çš„è‡ªå®šä¹‰ç‰ˆæœ¬ï¼Œæ”¯æŒ **DeepSeek + é˜¿é‡Œé€šä¹‰åƒé—® VLM** çš„å¤šæ¨¡æ€ RAG ç³»ç»Ÿã€‚

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
- [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [ç¯å¢ƒé…ç½®](#-ç¯å¢ƒé…ç½®)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [æ¨¡å‹é…ç½®](#-æ¨¡å‹é…ç½®)
- [ä½¿ç”¨è¯´æ˜](#-ä½¿ç”¨è¯´æ˜)
- [æŠ€æœ¯äº®ç‚¹](#-æŠ€æœ¯äº®ç‚¹)
- [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®åŸºäº [RAG-Anything](https://github.com/HKUDS/RAG-Anything) æ¡†æ¶ï¼Œé’ˆå¯¹**å›½å†…ç”¨æˆ·**è¿›è¡Œäº†ä¼˜åŒ–é…ç½®ï¼š

- **æ–‡æœ¬å¤„ç†**ï¼šä½¿ç”¨ **DeepSeek** ä½œä¸ºä¸» LLMï¼ˆæ€§ä»·æ¯”é«˜ã€ä¸­æ–‡èƒ½åŠ›å¼ºï¼‰
- **å›¾åƒå¤„ç†**ï¼šä½¿ç”¨ **é˜¿é‡Œé€šä¹‰åƒé—® Qwen-VL-Max**ï¼ˆæ”¯æŒå¤šå›¾è¾“å…¥ã€å›¾åƒç†è§£èƒ½åŠ›å¼ºï¼‰
- **æœ¬åœ°åµŒå…¥**ï¼šä½¿ç”¨ **SentenceTransformer** æœ¬åœ°æ¨¡å‹ï¼ˆæ— éœ€ API è°ƒç”¨ï¼‰

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RAG-Anything ç³»ç»Ÿ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚   æ–‡æ¡£è§£æ   â”‚ -> â”‚  å¤šæ¨¡æ€å¤„ç†  â”‚ -> â”‚  çŸ¥è¯†å›¾è°±   â”‚    â”‚
â”‚   â”‚   (MinerU)  â”‚    â”‚   (VLM)     â”‚    â”‚ (LightRAG)  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    æ¨¡å‹é…ç½®                          â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚   â”‚  â”‚   DeepSeek    â”‚  â”‚  Qwen-VL-Max  â”‚              â”‚  â”‚
â”‚   â”‚  â”‚  (æ–‡æœ¬ LLM)   â”‚  â”‚  (è§†è§‰ VLM)   â”‚              â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚              Streamlit Web ç•Œé¢                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. ğŸ”€ åŒæ¨¡å‹æ¶æ„
- **DeepSeek**ï¼šå¤„ç†æ–‡æœ¬ç”Ÿæˆã€å®ä½“æå–ã€å…³ç³»æ„å»º
- **Qwen-VL-Max**ï¼šå¤„ç†å›¾åƒç†è§£ã€å…¬å¼è¯†åˆ«ã€å›¾è¡¨åˆ†æ

### 2. ğŸ“¦ æ™ºèƒ½å›¾ç‰‡æ‰¹å¤„ç†
- è‡ªåŠ¨æ£€æµ‹æ–‡æ¡£ä¸­çš„å›¾ç‰‡æ•°é‡
- è¶…è¿‡é™åˆ¶æ—¶è‡ªåŠ¨åˆ†æ‰¹å¤„ç†ï¼ˆæ¯æ‰¹æœ€å¤š 10 å¼ ï¼‰
- ä½¿ç”¨ DeepSeek ç»¼åˆå¤šæ‰¹æ¬¡åˆ†æç»“æœ

### 3. ğŸ§® LaTeX å…¬å¼æ¸²æŸ“
- è‡ªåŠ¨è¯†åˆ«å¹¶åŒ…è£¹ LaTeX å…¬å¼
- æ”¯æŒè¡Œå†…å…¬å¼ `$...$` å’Œå—çº§å…¬å¼ `$$...$$`
- æ™ºèƒ½å¤„ç†ä¸­è‹±æ–‡æ··æ’åœºæ™¯

### 4. ğŸ›¡ï¸ å¥å£®çš„é”™è¯¯å¤„ç†
- VLM è°ƒç”¨å¤±è´¥è‡ªåŠ¨å›é€€åˆ°çº¯æ–‡æœ¬æ¨¡å¼
- API é™æµè‡ªåŠ¨é‡è¯•
- è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—è¾“å‡º

---

## âš™ï¸ ç¯å¢ƒé…ç½®

### 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# Windows
python -m venv venv
.\venv\Scripts\Activate.ps1

# Linux/Mac
python -m venv venv
source venv/bin/activate
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# DeepSeek é…ç½® (æ–‡æœ¬ LLM)
LLM_BINDING_HOST=https://api.deepseek.com/v1
LLM_BINDING_API_KEY=ä½ çš„_DeepSeek_API_Key

# LightRAG å†…éƒ¨ä½¿ç”¨ï¼ˆè®¾ç½®ä¸ºä¸ DeepSeek ç›¸åŒçš„ Keyï¼‰
OPENAI_API_KEY=ä½ çš„_DeepSeek_API_Key

# è§†è§‰æ¨¡å‹é…ç½®
VISION_PROVIDER=qwen   # å¯é€‰: zhipu, qwen, siliconflow

# é˜¿é‡Œé€šä¹‰åƒé—® (æ¨èï¼Œæ”¯æŒå¤šå›¾)
QWEN_API_KEY=ä½ çš„_Qwen_API_Key

# æˆ–è€…æ™ºè°± AI (æ¯æ¬¡ä»…æ”¯æŒ 1 å¼ å›¾)
# ZHIPU_API_KEY=ä½ çš„_æ™ºè°±_API_Key

# æˆ–è€… SiliconFlow
# SILICONFLOW_API_KEY=ä½ çš„_SiliconFlow_API_Key
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨ Streamlit åº”ç”¨

```bash
streamlit run app.py
```

åº”ç”¨å°†åœ¨ `http://localhost:8501` å¯åŠ¨ã€‚

### ä½¿ç”¨æ­¥éª¤

1. **ä¸Šä¼ æ–‡æ¡£**ï¼šæ”¯æŒ PDFã€Office æ–‡æ¡£ç­‰æ ¼å¼
2. **ç­‰å¾…è§£æ**ï¼šç³»ç»Ÿè‡ªåŠ¨è§£ææ–‡æ¡£å¹¶æ„å»ºçŸ¥è¯†å›¾è°±
3. **æé—®æŸ¥è¯¢**ï¼šè¾“å…¥é—®é¢˜ï¼Œç³»ç»Ÿè¿”å›å¤šæ¨¡æ€å¢å¼ºçš„ç­”æ¡ˆ

---

## ğŸ”§ æ¨¡å‹é…ç½®

### æ”¯æŒçš„è§†è§‰æ¨¡å‹

| æä¾›å•† | æ¨¡å‹åç§° | å¤šå›¾æ”¯æŒ | ç¯å¢ƒå˜é‡ |
|--------|----------|----------|----------|
| é˜¿é‡Œäº‘ | Qwen-VL-Max | âœ… æœ€å¤š 10 å¼  | `QWEN_API_KEY` |
| æ™ºè°± AI | GLM-4V | âŒ ä»… 1 å¼  | `ZHIPU_API_KEY` |
| SiliconFlow | Qwen2.5-VL | âœ… æœ€å¤š 5 å¼  | `SILICONFLOW_API_KEY` |

### åˆ‡æ¢è§†è§‰æ¨¡å‹

ä¿®æ”¹ `.env` ä¸­çš„ `VISION_PROVIDER`ï¼š

```env
# ä½¿ç”¨é˜¿é‡Œé€šä¹‰åƒé—® (æ¨è)
VISION_PROVIDER=qwen

# ä½¿ç”¨æ™ºè°± AI
VISION_PROVIDER=zhipu

# ä½¿ç”¨ SiliconFlow
VISION_PROVIDER=siliconflow
```

### è‡ªå®šä¹‰æ¨¡å‹ç«¯ç‚¹

```env
# è‡ªå®šä¹‰è§†è§‰æ¨¡å‹
VISION_MODEL=your-custom-model
VISION_BASE_URL=https://your-api-endpoint/v1
VISION_API_KEY=your-api-key
```

---

## ğŸ“– ä½¿ç”¨è¯´æ˜

### æŸ¥è¯¢æ¨¡å¼

ç³»ç»Ÿæ”¯æŒä¸‰ç§æŸ¥è¯¢æ¨¡å¼ï¼š

- **naive**ï¼šç®€å•æ£€ç´¢ï¼Œé€Ÿåº¦å¿«
- **local**ï¼šæœ¬åœ°ä¸Šä¸‹æ–‡ï¼Œé€‚åˆå…·ä½“é—®é¢˜
- **hybrid**ï¼šæ··åˆæ¨¡å¼ï¼Œç»¼åˆè€ƒè™‘å¤šç§å› ç´ ï¼ˆæ¨èï¼‰

### æŸ¥è¯¢ç¤ºä¾‹

```
ğŸ“„ ä¸Šä¼ æ–‡æ¡£åå¯ä»¥è¿™æ ·æé—®ï¼š

- "è¯·æ€»ç»“è¿™ä»½æ–‡æ¡£çš„ä¸»è¦å†…å®¹"
- "æ–‡æ¡£ä¸­æåˆ°äº†å“ªäº›å…³é”®å…¬å¼ï¼Ÿ"
- "è§£é‡Šä¸€ä¸‹ç¬¬ä¸‰ç« çš„æ ¸å¿ƒæ¦‚å¿µ"
- "è¿™ä¸ªå›¾è¡¨è¯´æ˜äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"
```

---

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### 1. å¤šæ¨¡æ€å¤„ç†æµæ°´çº¿

```python
# æ–‡æ¡£è§£æ -> æ¨¡æ€åˆ†ç¦» -> ä¸“é—¨å¤„ç† -> çŸ¥è¯†èåˆ
Document -> MinerU Parser -> Modal Processors -> LightRAG
                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“          â†“          â†“
  Text     Images     Tables
    â†“          â†“          â†“
DeepSeek  Qwen-VLM  DeepSeek
    â†“          â†“          â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        Knowledge Graph
```

### 2. å›¾ç‰‡æ‰¹å¤„ç†ç®—æ³•

```python
# æ™ºèƒ½åˆ†æ‰¹ï¼šé¿å… VLM API é™åˆ¶
if total_images > MAX_IMAGES_PER_REQUEST:
    batches = split_images(images, batch_size=10)
    results = []
    for batch in batches:
        result = await vlm_process(batch)
        results.append(result)
    final_answer = await deepseek_combine(results)
```

### 3. LaTeX å…¬å¼æ¸²æŸ“

è‡ªåŠ¨å°†è£¸ LaTeX ä»£ç è½¬æ¢ä¸º Streamlit å¯æ¸²æŸ“æ ¼å¼ï¼š

```
è¾“å…¥: \frac{\partial^2 u}{\partial t^2} = a^2 \nabla^2 u
è¾“å‡º: $\frac{\partial^2 u}{\partial t^2} = a^2 \nabla^2 u$
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆéœ€è¦è®¾ç½® OPENAI_API_KEYï¼Ÿ

LightRAG å†…éƒ¨çš„å®ä½“æå–æ¨¡å—ä¼šæ£€æŸ¥è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚å³ä½¿ä½¿ç”¨ DeepSeekï¼Œä¹Ÿéœ€è¦è®¾ç½®ä¸º DeepSeek çš„ API Keyã€‚

### Q2: å›¾ç‰‡å¤ªå¤šå¯¼è‡´ API æŠ¥é”™æ€ä¹ˆåŠï¼Ÿ

ç³»ç»Ÿå·²è‡ªåŠ¨å®ç°åˆ†æ‰¹å¤„ç†ã€‚å¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥åœ¨ `.env` ä¸­è°ƒæ•´ï¼š

```env
MAX_IMAGES_PER_REQUEST=5  # å‡å°‘æ¯æ‰¹å›¾ç‰‡æ•°é‡
```

### Q3: å…¬å¼æ˜¾ç¤ºä¹±ç æ€ä¹ˆåŠï¼Ÿ

ç¡®ä¿ LLM è¿”å›çš„å…¬å¼ä½¿ç”¨æ ‡å‡† LaTeX æ ¼å¼ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨å°è¯•ä¿®å¤å¸¸è§æ ¼å¼é—®é¢˜ã€‚

### Q4: å¦‚ä½•æŸ¥çœ‹è°ƒè¯•æ—¥å¿—ï¼Ÿ

è¿è¡Œæ—¶æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼Œä¼šæ˜¾ç¤ºï¼š
- ğŸ”§ ä½¿ç”¨çš„è§†è§‰æ¨¡å‹
- ğŸ“· æ£€æµ‹åˆ°çš„å›¾ç‰‡æ•°é‡
- ğŸš€ VLM è°ƒç”¨çŠ¶æ€
- âœ…/âŒ å¤„ç†ç»“æœ

---

## ğŸ“„ License

æœ¬é¡¹ç›®åŸºäº [RAG-Anything](https://github.com/HKUDS/RAG-Anything) å¼€å‘ï¼Œéµå¾ª MIT Licenseã€‚

---

## ğŸ™ è‡´è°¢

- [HKUDS/RAG-Anything](https://github.com/HKUDS/RAG-Anything) - åŸå§‹é¡¹ç›®
- [HKUDS/LightRAG](https://github.com/HKUDS/LightRAG) - åº•å±‚ RAG æ¡†æ¶
- [DeepSeek](https://deepseek.com/) - æ–‡æœ¬å¤§æ¨¡å‹
- [é˜¿é‡Œäº‘ç™¾ç‚¼](https://dashscope.aliyun.com/) - è§†è§‰å¤§æ¨¡å‹
